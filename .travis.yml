language: rust

rust:
- stable
- nightly
matrix:
  allow_failures:
  - rust: nightly
env:
  global:
  - secure: dVUJP6sIROOnJwkueodu5oizbVZvOAszsxK8lqb3nepltflMMoXnnyJ9SMW5rqwrwMB0GmyJyNVJ9F3KPYlsjFdPc6K4uvA9YndxagU+gJay7V+N6PwBp4f6qB9id5Wry9p5CtmM6samCam8ljpjzpeY4uK45Du43e9CgEQfm8uEZqs6MonTwmd2oq9zq9DXHLywHhT/QDvhgWR9M8KYse9FV7gXGIIOBjNIdrKelOMSjkkPBsHEIdhDE50Ltg0qV1n2P4Ral4Jqkfe8b/k9WDyPlYqW7Qot39LMGdOvwhiYlXpmymXyuM94WCqpJWR4n2FF5+zkt2fBtTbKNjwBkWfHQjC7T2eexCD0lMfymwsoLQ8a/ovCG3RRC4OCzaavBYq6T2QKQ0P7FXvxAMa6zsavVT9sdgNENK0udsW/nJObALStrvK6QzoMhHPfvRdTZ48cSplbSekEoPkRyG6wVStb8R9e+qOBO0N8gUS0NhiT5Otqfgn+dEnrz2ofGQcy1GIEUef9ah6gqWJtGmSVTO7q4+fFqphyq9JqqdC2vRvfRSkevW+AEATP+3DgcUUeDiwAYBSzb7vKgfCuq1sJUEVApI550dqoXCA3nhquAywvTp9t8puOJDz4oSrz2AmnhwDWHD27A/bcxolKgnmPngnT8YKVpr4rzlQ3btezIKE=
script:
- cargo build --verbose
- cargo test --verbose
after_success:
- |
  [ $TRAVIS_RUST_VERSION = stable ] &&
  [ $TRAVIS_BRANCH = master ] &&
  [ $TRAVIS_PULL_REQUEST = false ] &&
  cargo publish --token ${CRATESIO_TOKEN}
